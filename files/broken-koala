{"destroy":false,"value":"apiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: api-graphql-cna-golden-cep\r\nspec:\r\n  ports:\r\n     -  port: 80\r\n        protocol: TCP\r\n        targetPort: 8081\r\n  selector:\r\n    app: api-graphql-cna-golden-cep\r\n  type: NodePort\r\n---\r\napiVersion: apps/v1\r\nkind: Deployment\r\nmetadata:\r\n  name: api-graphql-cna-golden-cep\r\nspec:\r\n  replicas: 2\r\n  selector:\r\n    matchLabels:\r\n      app: api-graphql-cna-golden-cep\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: api-graphql-cna-golden-cep\r\n    spec:\r\n      containers:\r\n        - env:\r\n          - name: JAVA_OPTS\r\n            value: -XX:MaxRAMPercentage=50.0\r\n          - name: SPRING_CONFIG_LOCATION\r\n            value: /app/application.yml\r\n          image: api-graphql-cna-golden\r\n          imagePullPolicy: IfNotPresent\r\n          livenessProbe:\r\n            failureThreshold: 3\r\n            httpGet:\r\n              path: /actuator/health\r\n              port: 8080\r\n              scheme: HTTP\r\n            initialDelaySeconds: 30\r\n            periodSeconds: 10\r\n            successThreshold: 1\r\n            timeoutSeconds: 3\r\n          name: app\r\n          ports:\r\n          - containerPort: 8080\r\n            protocol: TCP\r\n          readinessProbe:\r\n            failureThreshold: 3\r\n            httpGet:\r\n              path: /actuator/health\r\n              port: 8080\r\n              scheme: HTTP\r\n            initialDelaySeconds: 5\r\n            periodSeconds: 10\r\n            successThreshold: 1\r\n            timeoutSeconds: 3\r\n          resources:\r\n            limits:\r\n              cpu: \"1.1\"\r\n              memory: 1536Mi\r\n            requests:\r\n              cpu: \"1.1\"\r\n              memory: 1536Mi\r\n          volumeMounts:\r\n          - mountPath: /secrets/cloudsql\r\n            name: cloudsql-instance-credentials\r\n            readOnly: true\r\n          - mountPath: /app/application.yml\r\n            name: api-graphql-cna-golden-application\r\n            subPath: application.yml\r\n        - name: api-graphql-cna-golden-cep\r\n          image: gcr.io/endpoints-release/endpoints-runtime:1\r\n          resources:\r\n            requests:\r\n              memory: 100Mi\r\n              cpu: 100m\r\n            limits:\r\n              memory: 256Mi\r\n              cpu: 500m\r\n          args: [\r\n            \"--healthz\", \"healthz\",\r\n            \"--http_port\", \"8081\",\r\n            \"--backend\", \"127.0.0.1:8080\",\r\n            \"--service\", \"api-graphql-cna-golden.endpoints.mdona-cloud-labpri-recadero.cloud.goog\",\r\n            \"--rollout_strategy\", \"managed\",\r\n            \"--cors_preset\", \"basic\",\r\n            \"--cors_allow_origin\", \"*\",\r\n            \"--cors_allow_headers\", \"DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,enctype,App-Version\",\r\n            \"--service_account_key\", \"/etc/nginx/creds/credentials.json\"\r\n          ]\r\n          ports:\r\n          - containerPort: 8081\r\n          readinessProbe:\r\n            httpGet:\r\n              path: /healthz\r\n              port: 8081\r\n          livenessProbe:\r\n            httpGet:\r\n              path: /healthz\r\n              port: 8081\r\n          volumeMounts:\r\n          - mountPath: /etc/nginx/creds\r\n            name: credentials.json\r\n            readOnly: true\r\n      imagePullSecrets:\r\n      - name: sa-recadero-cr-es        \r\n      volumes:\r\n      - name: json-sa-endpoints\r\n        configMap:\r\n          name: json-sa-endpoints\r\n      - name: cloudsql-instance-credentials\r\n        secret:\r\n          defaultMode: 420\r\n          secretName: sa-recadero-sqlproxy\r\n      # - name: service-account-cloud-endpoints\r\n      #   secret:\r\n      #     secretName: service-account-cloud-endpoints  \r\n      - configMap:\r\n          defaultMode: 420\r\n          name: api-graphql-cna-golden-application.yml-cg297m4kbb\r\n        name: api-graphql-cna-golden-application          \r\n","length":3835,"secret":false,"key":"broken-koala"}